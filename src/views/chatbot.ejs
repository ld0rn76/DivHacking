<div class="chat-container">
    <div class="chat-window" id="chat-window">
        <div class="message">
            <div class="message-box sender">
                Hi! I'm your financial friend. What would you like to learn about money today?
            </div>
        </div>
        
        <!-- Preset questions as clickable buttons -->
        <div class="preset-questions">
            <button class="preset-btn" onclick="sendPresetQuestion('What is an allowance?')">
                What is an allowance? üéØ
            </button>
            <button class="preset-btn" onclick="sendPresetQuestion('How do I save my money?')">
                How do I save my money? üí∞
            </button>
            <button class="preset-btn" onclick="sendPresetQuestion('Can I buy toys with my allowance?')">
                Can I buy toys with my allowance? üéÆ
            </button>
            <button class="preset-btn" onclick="sendPresetQuestion('Why should I save money?')">
                Why should I save money? üè¶
            </button>
            <button class="preset-btn" onclick="sendPresetQuestion('What is a piggy bank?')">
                What is a piggy bank? üê∑
            </button>
        </div>
    </div>

    <div class="input-container">
        <input type="text" class="chat-input" id="chat-input" placeholder="Type your question here...">
        <button class="send-button" onclick="sendMessage()">
            <img src="/img/send.svg" alt="Send">
        </button>
    </div>
</div>

<style>
.preset-questions {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin: 20px 0;
}

.preset-btn {
    background-color: #EDFDEB;
    border: 1px solid #F1FFF1;
    color: #2A3140;
    padding: 12px 20px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 14px;
    text-align: left;
    transition: background-color 0.2s;
}

.preset-btn:hover {
    background-color: #2AA46A;
    color: white;
}

.chat-input {
    background-color: #F7F8FA;
    border-radius: 10px;
    padding: 12px;
}

.send-button {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.send-button img {
    width: 20px;
    height: 20px;
}
</style>

<script>
async function sendMessage() {
    const input = document.getElementById('chat-input');
    const message = input.value.trim();
    if (!message) return;
    
    await sendPresetQuestion(message);
    input.value = '';
}

async function sendPresetQuestion(question) {
    const chatWindow = document.getElementById('chat-window');
    
    // Add user message
    const userDiv = document.createElement('div');
    userDiv.className = 'message';
    userDiv.innerHTML = `
        <div class="message-box receiver">
            ${question}
        </div>
    `;
    chatWindow.appendChild(userDiv);
    
    try {
        const response = await fetch('/api/chat', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ message: question })
        });
        
        const data = await response.json();
        
        // Add bot response
        const botDiv = document.createElement('div');
        botDiv.className = 'message';
        botDiv.innerHTML = `
            <div class="message-box sender">
                ${data.message}
            </div>
        `;
        chatWindow.appendChild(botDiv);
        
        // Scroll to bottom
        chatWindow.scrollTop = chatWindow.scrollHeight;
    } catch (error) {
        console.error('Error:', error);
    }
}
</script>